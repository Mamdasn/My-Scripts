#!/bin/bash


running_sink=$(pactl list short sinks | sed -n 's/^[0-9]*\s*\(\S*\)\s*.*RUNNING$/\1/p')
[ -z "$running_sink" ] && running_sink="@DEFAULT_SINK@"
volume=$(pactl get-sink-volume $running_sink | head -1 | awk '{print int(($5 + $12)/2)}')

emoji="üîä"
[ $volume -lt 67 ] && emoji="üîâ"
[ $volume -lt 33 ] && emoji="üîà"

[ "$(pactl get-sink-mute $running_sink)" = "Mute: yes" ] && emoji="üîá"

Meter () {
    [ $1 -eq 0 ]  &&  echo ‚£Ä‚£Ä‚£Ä‚£Ä‚£Ä && return
    [ $1 -eq 5 ]  &&  echo ‚£Ñ‚£Ä‚£Ä‚£Ä‚£Ä && return
    [ $1 -le 10 ] &&  echo ‚£§‚£Ä‚£Ä‚£Ä‚£Ä && return
    [ $1 -le 15 ] &&  echo ‚£∂‚£Ä‚£Ä‚£Ä‚£Ä && return
    [ $1 -le 20 ] &&  echo ‚£ø‚£Ä‚£Ä‚£Ä‚£Ä && return
    [ $1 -le 25 ] &&  echo ‚£ø‚£Ñ‚£Ä‚£Ä‚£Ä && return
    [ $1 -le 30 ] &&  echo ‚£ø‚£¶‚£Ä‚£Ä‚£Ä && return
    [ $1 -le 35 ] &&  echo ‚£ø‚£∂‚£Ä‚£Ä‚£Ä && return
    [ $1 -le 40 ] &&  echo ‚£ø‚£ø‚£Ä‚£Ä‚£Ä && return
    [ $1 -le 45 ] &&  echo ‚£ø‚£ø‚£Ñ‚£Ä‚£Ä && return
    [ $1 -le 50 ] &&  echo ‚£ø‚£ø‚£¶‚£Ä‚£Ä && return
    [ $1 -le 55 ] &&  echo ‚£ø‚£ø‚£∂‚£Ä‚£Ä && return
    [ $1 -le 60 ] &&  echo ‚£ø‚£ø‚£ø‚£Ä‚£Ä && return
    [ $1 -le 65 ] &&  echo ‚£ø‚£ø‚£ø‚£Ñ‚£Ä && return
    [ $1 -le 70 ] &&  echo ‚£ø‚£ø‚£ø‚£¶‚£Ä && return
    [ $1 -le 75 ] &&  echo ‚£ø‚£ø‚£ø‚£∂‚£Ä && return
    [ $1 -le 80 ] &&  echo ‚£ø‚£ø‚£ø‚£ø‚£Ä && return
    [ $1 -le 85 ] &&  echo ‚£ø‚£ø‚£ø‚£ø‚£Ñ && return
    [ $1 -le 90 ] &&  echo ‚£ø‚£ø‚£ø‚£ø‚£¶ && return
    [ $1 -le 95 ] &&  echo ‚£ø‚£ø‚£ø‚£ø‚£∂ && return
    [ $1 -le 100 ] && echo ‚£ø‚£ø‚£ø‚£ø‚£ø && return
    [ $1 -le 110 ] && echo ‚ñÑ‚ñÅ‚ñÅ‚ñÅ‚ñÅ && return
    [ $1 -le 120 ] && echo ‚ñà‚ñÅ‚ñÅ‚ñÅ‚ñÅ && return
    [ $1 -le 130 ] && echo ‚ñà‚ñÑ‚ñÅ‚ñÅ‚ñÅ && return
    [ $1 -le 140 ] && echo ‚ñà‚ñà‚ñÅ‚ñÅ‚ñÅ && return
    [ $1 -le 150 ] && echo ‚ñà‚ñà‚ñÑ‚ñÅ‚ñÅ && return
    [ $1 -le 160 ] && echo ‚ñà‚ñà‚ñà‚ñÅ‚ñÅ && return
    [ $1 -le 170 ] && echo ‚ñà‚ñà‚ñà‚ñÑ‚ñÅ && return
    [ $1 -le 180 ] && echo ‚ñà‚ñà‚ñà‚ñà‚ñÅ && return
    [ $1 -le 190 ] && echo ‚ñà‚ñà‚ñà‚ñà‚ñÑ && return
    [ $1 -gt 190 ] && echo ‚ñà‚ñà‚ñà‚ñà‚ñà && return
}

printf "%s %s\n" "$emoji" "$(Meter $volume)"

[ -n "$BLOCK_BUTTON" ] &&
    i3-sensible-terminal -- pavucontrol
